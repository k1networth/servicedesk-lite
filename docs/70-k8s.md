# Kubernetes — TODO (HPA + HA)

## Stateless services (ticket-service, outbox-relay, notification-service)
TODO:
- [ ] Deployment
- [ ] resources requests/limits
- [ ] readiness/liveness probes
- [ ] terminationGracePeriodSeconds + preStop hook (optional) to drain
- [ ] HPA:
  - ticket-service: CPU + optional RPS custom metric
  - notification-service: CPU + (лучше) Kafka lag custom metric
  - outbox-relay: CPU + outbox lag (custom metric) optional

## HA primitives
TODO:
- [ ] PDB (PodDisruptionBudget)
- [ ] anti-affinity / topology spread constraints
- [ ] rolling update strategy:
  - maxUnavailable=0 (для ticket-service)
  - surge settings
- [ ] config/secret management

## Stateful dependencies (прод-ориентиры)
TODO (выбери подход и опиши):
- Kafka:
  - Strimzi operator или helm chart
  - 3 brokers, replication factor 3
- Postgres:
  - CloudNativePG/Zalando operator или managed DB
  - primary + replicas, failover
- Redis:
  - Redis Sentinel/Cluster через helm/operator

## Ingress
TODO:
- [ ] ingress-nginx
- [ ] timeouts, body size limits (attachments)
